<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>QQ表情密文工具</title>
<STYLE type="text/css">
<!--CSS样式代码位置-->
	    input{
                border: 1px solid #ccc;
                padding: 7px 0px;
                border-radius: 3px;
                padding-left:5px;
                -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
                -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
                transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s
            }
            input:focus{
                    border-color: #66afe9;
                    outline: 0;
                    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);
                    box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)
            }
	    textarea{
		height: 50px
		width: 50px
                border: 1px solid #ccc;
                padding: 7px 0px;
                border-radius: 3px;
                padding-left:5px;
                -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
                -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
                transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s
            }
            textarea:focus{
                    border-color: #66afe9;
                    outline: 0;
                    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);
                    box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)
            }
</STYLE>
</head>

<body>
<p>QQ表情密文工具  Build021  本站短链：v666.ml/qq</p>
<textarea type="text" id="av" required></textarea><button onclick="return av() && false"> 加密</button>
<br>
<br>
<textarea type="text" id="bv" required></textarea><button onclick="return bv() && false"> 解密</button>
<p>结果：</p>
<p id="result">(等待输入)</p>
<input id="input">
<button onclick="copyText()">复制</button>
<p>使用方式：</p>
<p>加密：将需要加密的密文（格式见下）填入加密按钮前的输入框，点击加密，再点击复制，然后粘贴到QQ聊天框里自动变成表情</p>
<p>解密：双击QQ里对应密文（即表情符号），按复制，【切记！】将QQ切到后台并使用其他浏览器打开本页面，再把复制的字符粘贴到解密按钮前的输入框，点击解密自动出结果</p>
<p>密文要求：可使用英文字母，半角符号（能正常显示表情），但如果使用汉字，全角符号等字符可能会导致无法显示出表情（但不影响解密效果）</p>
<p>原理：手机版QQ识别自带表情符号的时候使用的是一个特殊控制字符加一个其他字符的方式，通过更改后一个字符即可实现在一串表情中隐藏密文</p>
<p>电脑版QQ兼容性报告：电脑版QQ由于无法复制QQ自带表情符号导致收到的密文不可解密，只能够发送加密信息，且从自己的角度看并没有变成表情，不过对方接收到的仍然是表情符号（手机版可正常解密）</p>
<p>教程视频：<a href="https://www.bilibili.com/video/BV1WT4y1M7eu/" target="_blank">哔哩哔哩</a><p>
<!--<a target="_blank" onclick="openVideo('tutorial.mp4')">
<div>【点我播放教程视频（主线路，可能出现卡顿）】</div>
</a>
<a target="_blank" onclick="openVideo('https://v666.ml/tutorial.mp4')">
<div>【点我播放教程视频（备用线路，总流量有限，请节约使用）】</div>
</a>-->
<br>
<p>By：<a href="https://space.bilibili.com/229778960" target="_blank">缇雷紫缨</a></p>

<script>
var system ={};
	var p = navigator.platform;
       system.win = p.indexOf("Win") == 0;
       system.mac = p.indexOf("Mac") == 0;
       system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);
       if(system.win||system.mac||system.xll){//如果是电脑
               alert("您当前正使用电脑访问本页面，请使用手机搭配本工具！");
       }else{  //如果是手机
              window.location.href="#";
}
function openVideo(src) {
	var page = window.open();
        var html="<body style='background:black'><div style='width:80%;margin:auto;'><video controls width='100%' autoplay src='"+src+ "'></video> </div></body>"
        page.document.write(html);
}
function copyText() {
  var text = document.getElementById("result").innerText;
  var input = document.getElementById("input");
  input.value = text; // 修改文本框的内容
  input.select(); // 选中文本
  document.execCommand("copy"); // 执行浏览器复制命令
  alert("复制成功");
}

const av2bv = (av) => {
	let num = 'Empty';
	num = av.replace(/(.)/g, '$1');
    if (av.match(/([])/g)) {
        return '¿你在想桃子？';
    } else {
        return num;
    };
};

const bv2av = (bv) => {
    let str = 'Empty';
	str = bv.replace(//g, '');
        if (!bv.match(/([])/g)) {
        return '¿你在想桃子？';
    } else {
        return str;
    };
};

const av = () => {
    let result = av2bv(document.getElementById('av').value);
    document.getElementById('result').innerHTML = `${result}`;
};

const bv = () => {
    let result = bv2av(document.getElementById('bv').value);
    document.getElementById('result').innerHTML = `${result}`;
};

document.getElementById('av').addEventListener('keydown', (event) => {
    if (event.keyCode === 13) {
        av();
    };
});

document.getElementById('bv').addEventListener('keydown', (event) => {
    if (event.keyCode === 13) {
        bv();
    };
});
</script>
</body>
</html>
